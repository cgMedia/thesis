\usetikzlibrary{colorbrewer, decorations.pathreplacing, shapes}

\begin{tikzpicture}[>=latex, scale=2]
\draw[step=1, black, thick, opacity=0.1] (-2,-2) grid (3, 3);

\fill[cbblue, opacity=0.4] (0,0) rectangle (1, 1);
\fill[cbblue, opacity=0.2] (-1,-1) rectangle (2, 2);

\foreach \x in {-1,...,2} {
  \foreach \y in {-1,...,2} {

    \draw[thick, cbblue, fill=white, radius=0.1] (\x,\y) circle;

  }
}


\fill[cbblue, radius=0.03] (0.2, 0.7) node (A) {} circle;
\fill[cbblue, radius=0.03] (0.5, 0.2) node (B) {} circle;
\fill[cbblue, radius=0.03] (0.8, 0.5) node (C) {} circle;

\foreach \x in {0, 0.333, ..., 1} {
  \foreach \y in {0, 0.333, ..., 1} {
    %\draw[cbblue, fill=white] (\x,\y) circle (0.05);
    %\draw[] (\x,\y) node[cross, cbblue] {};
  }
}

\draw[diamond] (1.5, 1.5);

%\draw (0.5, 0.5) node[cross out] {} circle (0.2);

\fill[cbblue, radius=0.06] node[anchor=north east] (0, 0) {$\mathbf{r}_\text{box}$} circle;

\node[cbblue] (pts) at (0.5, 1.2) {Particles};
\draw[cbblue, ->] (pts) -- (A);
\draw[cbblue, ->] (pts) -- (B);
\draw[cbblue, ->] (pts) -- (C);

\draw[cbblue, thick, decorate,decoration={brace,amplitude=10}] (-1.1,2.2) -- (2.1, 2.2) node [midway, above, yshift=10] {Expansion region};
\draw[cbblue, thick, decorate,decoration={brace,amplitude=10}] (1.1,1.1) -- (1.1, -0.1) node [midway, right, xshift=10] {Box};

\draw[<->, cbblue] (-2, -1.8) -- (-1, -1.8) node [midway, fill=white] {$h_x$};
\draw[<->, cbblue] (-1.8, -2) -- (-1.8, -1) node [midway, fill=white] {$h_y$};

\end{tikzpicture}
